<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HP Classe</title>

<!-- FONT 8BIT -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Press Start 2P', monospace;
    background: #111;
    color: #fff;
    padding: 10px;
    font-size: 10px;
}

h3 {
    text-align: center;
    margin-bottom: 16px;
}

.student {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
}

.name {
    width: 110px;
}

.hp-frame {
    width: 120px;
    height: 16px;
    border: 2px solid #fff;
    padding: 1px;
    position: relative;
}

.hp-bar {
    height: 100%;
    background: #2ecc71;
}

.hp-text {
    position: absolute;
    width: 100%;
    text-align: center;
    top: 1px;
    font-size: 8px;
}

.controls button {
    width: 32px;
    height: 32px;
    font-family: 'Press Start 2P', monospace;
    font-size: 14px;
    background: #222;
    color: #fff;
    border: 2px solid #fff;
}
</style>
</head>

<body>

<h3>HP CLASSE</h3>
<div id="classroom"></div>

<script>
const MAX_HP = 100;
const STORAGE_KEY = "hp_classe_8bit";

const defaultStudents = [
  { name: "Alessandro", hp: 100 },
  { name: "Vittoria", hp: 100 },
  { name: "Thomas", hp: 100 },
  { name: "Pietro", hp: 100 },
  { name: "Angelica", hp: 100 },
  { name: "Vlora", hp: 100 },
  { name: "Daniele", hp: 100 },
  { name: "David", hp: 100 },
  { name: "Gioele", hp: 100 },
  { name: "Martina", hp: 100 },
  { name: "Nikola", hp: 100 },
  { name: "Gabriele", hp: 100 }
];

let students = JSON.parse(localStorage.getItem(STORAGE_KEY)) || defaultStudents;

function save() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(students));
}

function hpColor(hp) {
    if (hp < 15) return "#e74c3c";   // rosso
    if (hp < 50) return "#f1c40f";   // giallo
    return "#2ecc71";               // verde
}

function render() {
    const container = document.getElementById("classroom");
    container.innerHTML = "";

    students.forEach(student => {
        const row = document.createElement("div");
        row.className = "student";

        const name = document.createElement("div");
        name.className = "name";
        name.textContent = student.name;

        const frame = document.createElement("div");
        frame.className = "hp-frame";

        const bar = document.createElement("div");
        bar.className = "hp-bar";
        bar.style.width = (student.hp / MAX_HP * 100) + "%";
        bar.style.background = hpColor(student.hp);

        const text = document.createElement("div");
        text.className = "hp-text";
        text.textContent = student.hp + " HP";

        frame.appendChild(bar);
        frame.appendChild(text);

        const controls = document.createElement("div");
        controls.className = "controls";

        const minus = document.createElement("button");
        minus.textContent = "âˆ’";
        minus.onclick = () => {
            student.hp = Math.max(0, student.hp - 1);
            save();
            render();
        };

        const plus = document.createElement("button");
        plus.textContent = "+";
        plus.onclick = () => {
            student.hp = Math.min(MAX_HP, student.hp + 1);
            save();
            render();
        };

        controls.appendChild(minus);
        controls.appendChild(plus);

        row.appendChild(name);
        row.appendChild(frame);
        row.appendChild(controls);

        container.appendChild(row);
    });
}

render();
</script>

</body>
</html>
